<!DOCTYPE html>
<html lang="en" style="background-color: #313131;">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="expires" content="0">
    <title>SecVision Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>

<body class="is-fullheight">
    <nav class="navbar is-dark" role="navigation" aria-label="main navigation">

        <div class="navbar-brand has-text-light">
            <a class="navbar-item has-text-light" href="/">
                SecVision
            </a>

            <a role="button" class="navbar-burger has-text-light" aria-label="menu" aria-expanded="false"
                data-target="pew">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div id="pew" class="navbar-menu has-background-dark">
            <ul class="navbar-start">
                <a class="navbar-item has-text-light" href="/chanpics?101">Front Lawn</a>
                <a class="navbar-item has-text-light" href="/chanpics?201">Front Door</a>
                <a class="navbar-item has-text-light" href="/chanpics?301">Driveway</a>
                <a class="navbar-item has-text-light" href="/chanpics?401">Side Gate</a>
                <a class="navbar-item has-text-light" href="/chanpics?501">Courtyard</a>
                <a class="navbar-item has-text-light" href="/chanpics?601">Garage Gate</a>
                <a class="navbar-item has-text-light" href="/chanpics?701">Back Lawn</a>
                <a class="navbar-item has-text-light" href="/chanpics?801">Pool Area</a>
            </ul>
        </div>

    </nav>
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Get all "navbar-burger" elements
            const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

            // Check if there are any navbar burgers
            if ($navbarBurgers.length > 0) {

                // Add a click event on each of them
                $navbarBurgers.forEach(el => {
                    el.addEventListener('click', () => {

                        // Get the target from the "data-target" attribute
                        const target = el.dataset.target;
                        const $target = document.getElementById(target);

                        // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                        el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');

                    });
                });
            }

        });
    </script>
    <script>

        async function fetchDataAsync(url) {
            const response = await fetch(url);
            const data = await response.json();
            let idx = 0
            let channel = url.substring(url.length - 3);
            let description = ""
            switch (channel) {
                case '101':
                    // code block
                    description = "Front Lawn"
                    break;
                case '201':
                    // code block
                    description = "Front Door"
                    break;
                case '301':
                    // code block
                    description = "Driveway"
                    break;
                case '401':
                    // code block
                    description = "Side Gate"
                    break;
                case '501':
                    // code block
                    description = "Courtyard"
                    break;
                case '601':
                    // code block
                    description = "Garage Gate"
                    break;
                case '701':
                    // code block
                    description = "Back Lawn"
                    break;
                case '801':
                    // code block
                    description = "Pool Area"
                    break;
            }
            data.forEach(obj => {
                Object.entries(obj).forEach(([key, value]) => {
                    if (key == 'path') {
                        document.getElementById(idx).src = value + 'frame.jpg';
                        document.getElementById(idx).alt = description;
                        let piclink = "c" + idx;
                        document.getElementById(piclink).href = value + 'frame.jpg';
                        idx = idx + 1;
                    }
                });
                console.log('-------------------');
            });
        }
        docUrl = document.URL
        let channel = docUrl.substring(docUrl.length - 3);
        page = 1
        fetchDataAsync('/chaninfo?id=' + channel + '&page=' + page);

        async function forwardPage() {
            page++;
            fetchDataAsync('/chaninfo?id=' + channel + '&page=' + page);
        }
        async function backPage() {
            page--;
            if (page == 0) {
                page = 1;
            }
            fetchDataAsync('/chaninfo?id=' + channel + '&page=' + page);
        }
    </script>
    <section class="hero">
        <div class="hero-body">
            <div class="container is-fluid is-0-mobile">
                <div class="buttons">
                    <button onclick="backPage()" class="button is-small is-info">Prev</button>
                <!-- </div>
                <div class="buttons"> -->
                    <button onclick="forwardPage()" class="button is-small is-info">Next</button>
                </div>
                <div class="columns">
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c0">
                                        <img id="0">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c1">
                                        <img id="1">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c2">
                                        <img id="2">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="columns">
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c3">
                                        <img id="3">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c4">
                                        <img id="4">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c5">
                                        <img id="5">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="columns">
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c6">
                                        <img id="6">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c7">
                                        <img id="7">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c8">
                                        <img id="8">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

</html>