<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en" style="background-color: #313131;">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="max-age=31536000">
    <title>SecVision Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>

<body class="is-fullheight">
    <nav class="navbar is-fixed-top is-dark" role="navigation" aria-label="main navigation">

        <div class="navbar-brand has-text-light">
            <a class="navbar-item has-text-light" href="/">
                SecVision
            </a>

            <a role="button" class="navbar-burger has-text-light" aria-label="menu" aria-expanded="false"
                data-target="pew">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div id="pew" class="navbar-menu has-background-dark">
            <ul class="navbar-start">
                <a class="navbar-item has-text-light" href="/history?channel=101&page=1">Front Lawn</a>
                <a class="navbar-item has-text-light" href="/history?channel=201&page=1">Front Door</a>
                <a class="navbar-item has-text-light" href="/history?channel=301&page=1">Driveway</a>
                <a class="navbar-item has-text-light" href="/history?channel=401&page=1">Side Gate</a>
                <a class="navbar-item has-text-light" href="/history?channel=501&page=1">Courtyard</a>
                <a class="navbar-item has-text-light" href="/history?channel=601&page=1">Garage Gate</a>
                <a class="navbar-item has-text-light" href="/history?channel=701&page=1">Back Lawn</a>
                <a class="navbar-item has-text-light" href="/history?channel=801&page=1">Pool Area</a>
            </ul>
        </div>

    </nav>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', () => {

            // Get all "navbar-burger" elements
            const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

            // Check if there are any navbar burgers
            if ($navbarBurgers.length > 0) {

                // Add a click event on each of them
                $navbarBurgers.forEach(el => {
                    el.addEventListener('click', () => {

                        // Get the target from the "data-target" attribute
                        const target = el.dataset.target;
                        const $target = document.getElementById(target);

                        // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                        el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');

                    });
                });
            }

        });
    </script>
    <script type="text/javascript">
        const urlParams = new URLSearchParams(window.location.search);
        let channel = urlParams.get('channel');
        let page = urlParams.get('page');
        let description = ""
        if (page < 1) {
            page = 1;
        }
        async function fetchDataAsync(url) {
            const response = await fetch(url);
            const data = await response.json();
            let idx = 0
            
            switch (channel) {
                case '101':
                    description = "Front Lawn"
                    break;
                case '201':
                    description = "Front Door"
                    break;
                case '301':
                    description = "Driveway"
                    break;
                case '401':
                    description = "Side Gate"
                    break;
                case '501':
                    description = "Courtyard"
                    break;
                case '601':
                    description = "Garage Gate"
                    break;
                case '701':
                    description = "Back Lawn"
                    break;
                case '801':
                    description = "Pool Area"
                    break;
            }
            data.forEach(obj => {
                Object.entries(obj).forEach(([key, value]) => {
                    if (key == 'path') {
                        document.getElementById(idx).src = value + 'frame.jpg';
                        document.getElementById(idx).alt = description;
                        let piclink = "c" + idx;
                        document.getElementById(piclink).href = value + 'frame.jpg';
                        idx = idx + 1;
                    }
                });
            });
        }
        fetchDataAsync('/chaninfo?id=' + channel + '&page=' + page);
    </script>
    <script type="text/javascript">
        async function forwardPage() {
            page++;
            let uri = `/history?channel=${channel}&page=${page}`;
            window.location.href = uri;
        }
        async function backPage() {
            page--;
            if (page === 0) {
                page = 1;
                return;
            }
            let uri = `/history?channel=${channel}&page=${page}`;
            window.location.href = uri;
        }
    </script>
    <section class="hero">
        <div class="hero-body">
            <div class="container is-fluid">
                <div class="columns is-desktop">
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c0">
                                        <img id="0">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c1">
                                        <img id="1">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c2">
                                        <img id="2">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="columns is-desktop">
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c3">
                                        <img id="3">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c4">
                                        <img id="4">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c5">
                                        <img id="5">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="columns is-desktop">
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c6">
                                        <img id="6">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c7">
                                        <img id="7">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-16by9">
                                    <a target="_blank" id="c8">
                                        <img id="8">
                                    </a>
                                </figure>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="columns">
                    <div class="column is-half">
                        <button onclick="backPage()" class="button is-medium is-info">Prev</button>
                    </div>
                    <div class="column is-half has-text-right">
                        <button onclick="forwardPage()" class="button is-medium is-info">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

</html>